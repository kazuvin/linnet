@import "tailwindcss";
@custom-variant dark (&:where(.dark, .dark *));

@theme {
  /* ============================================
     Base Colors
     ============================================ */

  /* Neutral */
  --color-background: oklch(0.9848 0.0054 95.1);
  --color-foreground: oklch(0.2 0 0);
  --color-card: oklch(1 0 0);
  --color-surface: oklch(0.97 0 0);
  --color-surface-elevated: oklch(0.99 0 0);
  --color-border: oklch(0.92 0 0);
  --color-muted: oklch(0.55 0 0);
  --color-muted-foreground: oklch(0.45 0 0);

  /* Primary (purple: 274.42) */
  --color-primary: oklch(0.55 0.18 274.42);
  --color-primary-hover: oklch(0.5 0.19 274.42);
  --color-primary-active: oklch(0.45 0.2 274.42);
  --color-primary-subtle: oklch(0.93 0.04 274.42);

  /* ============================================
     Music Theory Colors
     Pastel bg + dark same-hue fg
     ============================================ */

  /* Tonic (I, IIIm, VIm) — Purple / Lavender (hue 300.42) */
  --color-tonic: oklch(0.8 0.09 300.42);
  --color-tonic-foreground: oklch(0.3 0.09 300.42);

  /* Subdominant (IIm, IV) — Sage / Green (hue 170.42) */
  --color-subdominant: oklch(0.82 0.08 170.42);
  --color-subdominant-foreground: oklch(0.3 0.08 170.42);

  /* Dominant (V, VIIdim) — Rose / Pink (hue 20.42) */
  --color-dominant: oklch(0.78 0.1 20.42);
  --color-dominant-foreground: oklch(0.32 0.1 20.42);

  /* Fretboard Overlay — Chord tones & Scale */
  /* Chord root — Red (hue 25) */
  --color-chord-root: oklch(0.8 0.09 25);
  --color-chord-root-fg: oklch(0.3 0.09 25);

  /* Chord tone (non-root) — Orange (hue 55) */
  --color-chord-tone: oklch(0.8 0.09 55);
  --color-chord-tone-fg: oklch(0.3 0.09 55);

  /* Scale tone — Gray */
  --color-scale-tone: oklch(0.8 0 0);
  --color-scale-tone-fg: oklch(0.3 0 0);

  /* Avoid note — Muted Purple (hue 274.42) */
  --color-avoid-note: oklch(0.8 0.09 274.42);
  --color-avoid-note-fg: oklch(0.3 0.09 274.42);

  /* Black key overlay — higher saturation for visibility on dark surface */
  --color-chord-root-vivid: oklch(0.7 0.14 25);
  --color-chord-tone-vivid: oklch(0.72 0.14 55);
  --color-scale-tone-vivid: oklch(0.65 0 0);
  --color-avoid-note-vivid: oklch(0.7 0.14 274.42);
  --color-vivid-fg: oklch(0.98 0 0);

  /* Semantic */
  --color-success: oklch(0.72 0.19 145);
  --color-warning: oklch(0.75 0.18 75);
  --color-error: oklch(0.63 0.24 27);

  /* ============================================
     Typography
     ============================================ */
  --font-sans: var(--font-noto-serif), system-ui, serif;

  /* ============================================
     Radius — generous, soft feel
     ============================================ */
  --radius-sm: 0.5rem;
  --radius-md: 0.75rem;
  --radius-lg: 1.5rem;
  --radius-xl: 2rem;

  /* ============================================
     Shadows
     ============================================ */
  --shadow-card: 0 1px 3px oklch(0 0 0 / 0.04), 0 1px 2px oklch(0 0 0 / 0.02);
  --shadow-card-hover: 0 4px 12px oklch(0 0 0 / 0.06), 0 2px 4px oklch(0 0 0 / 0.03);
  --shadow-dropdown: 0 8px 24px oklch(0 0 0 / 0.08);

  /* ============================================
     Spacing
     ============================================ */
  --space-xs: 0.375rem;
  --space-sm: 0.75rem;
  --space-md: 1.25rem;
  --space-lg: 2rem;
  --space-xl: 3rem;

  /* ============================================
     Layout
     ============================================ */
  --container-max: 72rem;
  --grid-gap: 1.25rem;
  --grid-gap-sm: 1rem;

  /* ============================================
     Animation
     ============================================ */
  --ease-default: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  --ease-spring: cubic-bezier(0.34, 1.46, 0.74, 1);

  --animate-fade-in: fade-in 0.2s ease;
  --animate-pop: pop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  --animate-fade-in-up: fade-in-up 0.6s ease forwards;
  --animate-check-bounce: check-bounce 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s both;
  --animate-shake: shake 0.4s ease 0.3s both;
  --animate-draw: draw 0.3s ease forwards 0.15s;
}

/* ============================================
   Keyframes
   ============================================ */

@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes pop {
  0% {
    transform: scale(1);
  }
  30% {
    transform: scale(1.04);
  }
  60% {
    transform: scale(0.98);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes fade-in-up {
  0% {
    opacity: 0;
    transform: translateY(30px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes check-bounce {
  0% {
    transform: scale(0);
    opacity: 0;
  }
  50% {
    transform: scale(1.2);
    opacity: 1;
  }
  70% {
    transform: scale(0.9);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes shake {
  0%,
  100% {
    transform: translateX(0);
  }
  10%,
  30%,
  50%,
  70%,
  90% {
    transform: translateX(-2px);
  }
  20%,
  40%,
  60%,
  80% {
    transform: translateX(2px);
  }
}

@keyframes draw {
  from {
    stroke-dashoffset: 24;
  }
  to {
    stroke-dashoffset: 0;
  }
}

/* ============================================
   Enter/Exit Animations (tailwindcss-animate pattern)
   Used for Dropdown, Dialog, and overlay components
   ============================================ */

@keyframes enter {
  from {
    opacity: var(--tw-enter-opacity, 1);
    transform: translate3d(var(--tw-enter-translate-x, 0), var(--tw-enter-translate-y, 0), 0)
      scale3d(var(--tw-enter-scale, 1), var(--tw-enter-scale, 1), var(--tw-enter-scale, 1))
      rotate(var(--tw-enter-rotate, 0));
  }
}

@keyframes exit {
  to {
    opacity: var(--tw-exit-opacity, 1);
    transform: translate3d(var(--tw-exit-translate-x, 0), var(--tw-exit-translate-y, 0), 0)
      scale3d(var(--tw-exit-scale, 1), var(--tw-exit-scale, 1), var(--tw-exit-scale, 1))
      rotate(var(--tw-exit-rotate, 0));
  }
}

/* Base animation utilities */
@utility animate-in {
  animation-name: enter;
  animation-duration: 150ms;
  --tw-enter-opacity: initial;
  --tw-enter-scale: initial;
  --tw-enter-rotate: initial;
  --tw-enter-translate-x: initial;
  --tw-enter-translate-y: initial;
}

@utility animate-out {
  animation-name: exit;
  animation-duration: 150ms;
  --tw-exit-opacity: initial;
  --tw-exit-scale: initial;
  --tw-exit-rotate: initial;
  --tw-exit-translate-x: initial;
  --tw-exit-translate-y: initial;
}

/* Fade animations */
@utility fade-in-0 {
  --tw-enter-opacity: 0;
}

@utility fade-out-0 {
  --tw-exit-opacity: 0;
}

/* Zoom/Scale animations */
@utility zoom-in-95 {
  --tw-enter-scale: 0.95;
}

@utility zoom-out-95 {
  --tw-exit-scale: 0.95;
}

/* Slide in from directions */
@utility slide-in-from-top-2 {
  --tw-enter-translate-y: -0.5rem;
}

@utility slide-in-from-bottom-2 {
  --tw-enter-translate-y: 0.5rem;
}

@utility slide-in-from-left-2 {
  --tw-enter-translate-x: -0.5rem;
}

@utility slide-in-from-right-2 {
  --tw-enter-translate-x: 0.5rem;
}

/* Slide out to directions */
@utility slide-out-to-top-2 {
  --tw-exit-translate-y: -0.5rem;
}

@utility slide-out-to-bottom-2 {
  --tw-exit-translate-y: 0.5rem;
}

@utility slide-out-to-left-2 {
  --tw-exit-translate-x: -0.5rem;
}

@utility slide-out-to-right-2 {
  --tw-exit-translate-x: 0.5rem;
}

/* Dialog/Sheet specific: center positioning with percentage-based slides */
@utility slide-in-from-left-half {
  --tw-enter-translate-x: -50%;
}

@utility slide-in-from-top-48pct {
  --tw-enter-translate-y: -48%;
}

@utility slide-out-to-left-half {
  --tw-exit-translate-x: -50%;
}

@utility slide-out-to-top-48pct {
  --tw-exit-translate-y: -48%;
}

/* Animation duration utility */
@utility duration-200 {
  animation-duration: 200ms;
}

/* ============================================
   Global Styles
   ============================================ */

body {
  background: var(--color-background);
  color: var(--color-foreground);
  font-family: var(--font-sans);
}

/* Grid 16 columns for chord grid */
@utility grid-cols-16 {
  grid-template-columns: repeat(16, minmax(0, 1fr));
}

/* Override default container max-width */
@utility container {
  width: 100%;
  max-width: var(--container-max);
}
