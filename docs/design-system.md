# デザインシステム

## デザインコンセプト

**ライト・パステル + Bento Grid**

薄いグレーの背景に白カードを配置する Bento Grid レイアウト。
コードの機能色は淡いパステルカラーで表現し、テキストは背景と色相を揃えた黒に近い色で統一。
角丸を強めに、余白を広くとることで、余裕のある柔らかい印象。

---

## カラーシステム（OKLch）

### 設計方針

- 機能色は **淡いパステル** をベースに、テキストは **同色相の暗い色** で統一
- 例: 淡いラベンダー背景 → 暗い紫テキスト / 淡いローズ背景 → 暗いローズテキスト
- 色相を揃えることでカード内の一体感を出す

### ベースカラー

| トークン | 用途 | 値 |
|---|---|---|
| `--color-background` | ページ背景（薄いグレー） | `oklch(0.955 0 0)` |
| `--color-foreground` | メインテキスト | `oklch(0.2 0 0)` |
| `--color-card` | カード背景（白） | `oklch(1 0 0)` |
| `--color-surface` | セクション背景など | `oklch(0.97 0 0)` |
| `--color-border` | ボーダー | `oklch(0.92 0 0)` |
| `--color-muted` | 補助テキスト | `oklch(0.55 0 0)` |
| `--color-muted-foreground` | muted上のテキスト | `oklch(0.45 0 0)` |

### プライマリ

| トークン | 用途 | 値 |
|---|---|---|
| `--color-primary` | ボタン・リンク・選択状態 | `oklch(0.55 0.18 264)` |
| `--color-primary-hover` | ホバー | `oklch(0.50 0.19 264)` |
| `--color-primary-active` | アクティブ | `oklch(0.45 0.20 264)` |
| `--color-primary-subtle` | 薄い背景 | `oklch(0.93 0.04 264)` |

### コード機能色（Music Theory Colors）

コードのハーモニック機能に基づく色分け。各色は `bg`（淡い背景）と `fg`（暗いテキスト）のペア。

#### トニック（I, IIIm, VIm）— パープル/ラベンダー（hue 290）

安定・着地の印象。

| トークン | 用途 | 値 |
|---|---|---|
| `--color-tonic` | 背景・バッジ・指板ドット | `oklch(0.80 0.09 290)` |
| `--color-tonic-fg` | テキスト | `oklch(0.30 0.09 290)` |
| `--color-tonic-subtle` | 薄い背景（カード内区分） | `oklch(0.93 0.04 290)` |

#### サブドミナント（IIm, IV）— セージ/グリーン（hue 160）

穏やか・展開の印象。

| トークン | 用途 | 値 |
|---|---|---|
| `--color-subdominant` | 背景・バッジ・指板ドット | `oklch(0.82 0.08 160)` |
| `--color-subdominant-fg` | テキスト | `oklch(0.30 0.08 160)` |
| `--color-subdominant-subtle` | 薄い背景 | `oklch(0.93 0.04 160)` |

#### ドミナント（V, VIIdim）— ローズ/ピンク（hue 10）

緊張・解決への推進力。

| トークン | 用途 | 値 |
|---|---|---|
| `--color-dominant` | 背景・バッジ・指板ドット | `oklch(0.78 0.10 10)` |
| `--color-dominant-fg` | テキスト | `oklch(0.32 0.10 10)` |
| `--color-dominant-subtle` | 薄い背景 | `oklch(0.93 0.04 10)` |

#### 色の使い方

```
┌─────────────────────────────┐
│  [tonic-fg] Imaj7           │  ← テキストは暗い同色相
│  bg: tonic (淡いラベンダー)   │  ← 背景は淡いパステル
└─────────────────────────────┘

┌─────────────────────────────┐
│  [dominant-fg] V7           │
│  bg: dominant (淡いローズ)    │
└─────────────────────────────┘
```

### ダイアトニック vs モーダルインターチェンジの区別

同じ機能色を共有しつつ、視覚的に区別する:

- **ダイアトニック**: パステル背景 + 暗い同色相テキスト（ソリッド）
- **モーダルインターチェンジ**: subtle 背景 + 左ボーダー（機能色）+ テキスト同色相

### セマンティック

| トークン | 用途 | 値 |
|---|---|---|
| `--color-success` | 成功 | `oklch(0.72 0.19 145)` |
| `--color-warning` | 警告 | `oklch(0.75 0.18 75)` |
| `--color-error` | エラー | `oklch(0.63 0.24 27)` |

---

## タイポグラフィ

| トークン | フォント | 用途 |
|---|---|---|
| `--font-sans` | Geist Sans | UI テキスト全般 |
| `--font-mono` | Geist Mono | コード名（Cmaj7, Dm7 等）、度数表記（I, IV, V） |

### スケール

| クラス | サイズ | 用途 |
|---|---|---|
| `text-xs` | 0.75rem | バッジ内テキスト、注釈 |
| `text-sm` | 0.875rem | 補助テキスト、カード内説明 |
| `text-base` | 1rem | 本文 |
| `text-lg` | 1.125rem | カードタイトル |
| `text-xl` | 1.25rem | セクション見出し |
| `text-2xl` | 1.5rem | ページタイトル |

コード名・度数表記は `font-mono font-medium` を基本とし、読み取りやすさを優先。

---

## レイアウト：Bento Grid

### 構造

```
┌─────────────────────────────────────────────┐
│  Header（キー選択・ナビ）                      │
├──────────────────┬──────────────────────────┤
│                  │                          │
│  コードパレット    │   指板ビジュアライザー     │
│  （2x2 or 1列）  │   （メインカード・大）      │
│                  │                          │
├──────────────────┴──────────────────────────┤
│  コード進行タイムライン（横長カード）            │
│  [ Cm7 ] [ Fm7 ] [ Bb7 ] [ Ebmaj7 ] ...    │
├──────────────────┬──────────────────────────┤
│  スケール情報     │   コード詳細              │
│                  │                          │
└──────────────────┴──────────────────────────┘
```

### Grid 設計

```css
/* デスクトップ: 4カラム */
grid-template-columns: repeat(4, 1fr);
gap: 1.25rem;

/* タブレット: 2カラム */
grid-template-columns: repeat(2, 1fr);

/* モバイル: 1カラム（指板は横スクロール対応） */
grid-template-columns: 1fr;
gap: 1rem;
```

### コンテナ

| トークン | 値 | 用途 |
|---|---|---|
| `--container-max` | `72rem`（1152px） | Bento Grid の最大幅 |
| `--grid-gap` | `1.25rem` | Grid ギャップ |
| `--grid-gap-sm` | `1rem` | モバイル Grid ギャップ |

---

## カードデザイン

Bento Grid の基本単位。角丸強め・余白広め。

### スタイル

| プロパティ | 値 |
|---|---|
| 背景 | `var(--color-card)` = 白 |
| 角丸 | `1.5rem`（24px） |
| シャドウ | `0 1px 3px oklch(0 0 0 / 0.04), 0 1px 2px oklch(0 0 0 / 0.02)` |
| ボーダー | `1px solid var(--color-border)` |
| パディング | `1.5rem`（24px） |

### バリアント

- **Default**: 白背景 + subtle shadow + 強めの角丸
- **Interactive**: hover で shadow 強化 + 微小な translateY
- **Accent**: 上部に機能色のボーダー（トニック=ラベンダー、サブドミナント=セージ、ドミナント=ローズ）
- **Ghost**: 背景なし・ボーダーのみ（補助的な情報表示）

---

## スペーシング

余白は広めにとり、ゆとりのあるレイアウトを実現。

| トークン | 値 | 用途 |
|---|---|---|
| `--space-xs` | `0.375rem` | 最小余白 |
| `--space-sm` | `0.75rem` | アイテム間 |
| `--space-md` | `1.25rem` | カード間・セクション内 |
| `--space-lg` | `2rem` | セクション間 |
| `--space-xl` | `3rem` | 大セクション間 |

---

## 角丸

角丸は全体的に強め。柔らかく親しみやすい印象。

| トークン | 値 | 用途 |
|---|---|---|
| `--radius-sm` | `0.5rem` | バッジ、小さなボタン |
| `--radius-md` | `0.75rem` | 入力フィールド、ドロップダウン |
| `--radius-lg` | `1.5rem` | カード |
| `--radius-xl` | `2rem` | 大きなカード・モーダル |
| `--radius-full` | `9999px` | 丸ボタン、ピル |

---

## シャドウ

| トークン | 値 | 用途 |
|---|---|---|
| `--shadow-card` | `0 1px 3px oklch(0 0 0/0.04), 0 1px 2px oklch(0 0 0/0.02)` | カードデフォルト |
| `--shadow-card-hover` | `0 4px 12px oklch(0 0 0/0.06), 0 2px 4px oklch(0 0 0/0.03)` | カードホバー |
| `--shadow-dropdown` | `0 8px 24px oklch(0 0 0/0.08)` | ドロップダウン・ポップオーバー |

---

## インタラクション

### タッチターゲット

最小タッチターゲット: `44px`（モバイル・タブレット対応）

### トランジション

| 対象 | duration | easing |
|---|---|---|
| ホバー・色変化 | `150ms` | `ease` |
| カード昇降 | `200ms` | `cubic-bezier(0.25, 0.46, 0.45, 0.94)` |
| 指板の音表示切替 | `120ms` | `ease-out`（速さ重視） |
| ドラッグ中 | `0ms` | - （遅延なし） |
| ドロップ確定 | `250ms` | `cubic-bezier(0.34, 1.46, 0.74, 1)`（スプリング） |

---

## 指板ビジュアライゼーション

Bento Grid 内で最も大きなカードとして配置。

### カラーマッピング（指板上の音）

- **ルート音**: 機能色（パステル・やや大きめドット）+ 暗い同色相の音名テキスト
- **コードトーン**: 機能色 subtle + 同色相テキスト
- **スケール音**: グレー（`--color-muted`）
- **非表示音**: フレットのみ表示

### 指板スタイル

| 要素 | スタイル |
|---|---|
| 弦 | 細いグレーライン、6弦は太め |
| フレット | ライトグレーの縦線 |
| ナット（0フレット） | 太い黒線 |
| ポジションマーク | subtle なドット（3,5,7,9,12フレット） |
| 音の表示 | 円形ドット + 音名テキスト |

---

## レスポンシブ戦略

| ブレークポイント | 幅 | Grid カラム | 指板表示 |
|---|---|---|---|
| モバイル | `< 640px` | 1列 | 横スクロール or 縦向き |
| タブレット | `640px - 1024px` | 2列 | フル表示 |
| デスクトップ | `> 1024px` | 4列 | フル表示 |
